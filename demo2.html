<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>

  <script>
    function makeWall(sceneEl,x,y,height,blockSize)
    {
      var el = document.createElement('a-box');
      el.setAttribute("position",`${x*blockSize} 1 ${y*blockSize}`);
      el.setAttribute("scale",`${blockSize} ${height} ${blockSize}`);

      sceneEl.appendChild(el);

      makeCeiling(sceneEl, x, y, height, blockSize);
    }

    function makeWallWithWindow(sceneEl,x,y,height,blockSize)
    {
      var el = document.createElement('a-box');
      el.setAttribute("position",`${x*blockSize} 1 ${y*blockSize}`);
      el.setAttribute("scale",`${blockSize} ${blockSize} ${blockSize}`);


      sceneEl.appendChild(el);

      makeCeiling(sceneEl, x, y, height, blockSize);
    }    

    function makeCeiling(sceneEl,x,y,height,blockSize)
    {
      var el = document.createElement('a-box');
      var k = height - blockSize - 1;
      el.setAttribute("position",`${x*blockSize} ${k} ${y*blockSize}`);
      el.setAttribute("scale",`${blockSize} ${blockSize} ${blockSize}`);
      el.setAttribute("color","purple");
      sceneEl.appendChild(el);
    }

    var GRID_WALL = 1;
    var GRID_ROOF = 2;
    var GRID_WALL_WINDOW = 3;
    AFRAME.registerComponent('grid-space', {
      
      init: function () {

        var grid = [
            [1,1,1,1,1,1,1,1,1,1],
            [3,2,2,2,2,2,2,2,2,1],
            [3,2,2,2,2,2,2,2,2,1],
            [1,2,2,2,2,2,2,2,2,1],
            [1,2,2,2,1,1,1,1,2,2],
            [0,2,2,2,3,2,2,2,2,2],
            [0,2,2,2,3,2,2,2,2,1],
            [1,2,2,2,3,2,2,2,2,1],
            [1,2,2,2,1,2,2,2,2,1],
            [1,1,1,1,1,1,1,1,1,1]
        ]
        console.log('Hello, World!');
        var sceneEl = document.querySelector('a-scene');
        

        var x = 0;
        var y = 0;
        var blockSize = 4;
        var height = 16;
        for(x=0; x<10; x++)
        {
            for(y=0; y<10;  y++)
            {
              var gridValue = grid[x][y];

              if(gridValue === GRID_WALL)
              {
                makeWall(sceneEl, x, y, height, blockSize);
              }
              else if(gridValue == GRID_ROOF)
              {
                makeCeiling(sceneEl, x, y, height, blockSize);
              }
              else if(gridValue == GRID_WALL_WINDOW)
              {
                makeWallWithWindow(sceneEl, x, y, height, blockSize);
              }

            }
        }
      }
    });
  </script>
</head>

<body>
  <a-scene>
    <a-entity environment="preset: tron"></a-entity>

    <a-entity grid-space ></a-entity>
  </a-scene>
</body>

</html>